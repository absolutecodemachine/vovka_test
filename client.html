<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Результаты Анализатора</title>
</head>
<body>
    <h1>Матчи</h1>

    <div id="matches">
        <!-- Здесь будут отображаться матчи -->
    </div>

    <script>
        const ws = new WebSocket("ws://localhost:7300/output");

        ws.onmessage = function(event) {
            console.log("Получено сообщение от сервера:", event.data);

            const matchesDiv = document.getElementById("matches");

            // Парсим сообщение по строкам
            const messages = event.data.split("\n");

            messages.forEach(msg => {
                if (!msg.trim()) return; // Пропуск пустых строк

                // Создаём новый элемент
                const matchElement = document.createElement("p");
                matchElement.innerText = msg.trim(); // Добавляем строку как есть
                matchesDiv.appendChild(matchElement);
            });
        };

        ws.onopen = function() {
            console.log("Подключено к серверу.");
        };

        ws.onclose = function() {
            console.log("Отключено от сервера.");
        };

        ws.onerror = function(event) {
            console.error("Ошибка веб-сокета:", event);
        };
    </script>
</body>
</html>
